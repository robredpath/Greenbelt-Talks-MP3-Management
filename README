This is the order processing system for Greenbelt Festival's Talks Team.

Installation:- Copy gb_talks.conf to /etc and make it readable by the appropriate users. We recommend that these scripts be executed as as reduced-priviledge user. TODO: automate this with GNU make. Trying to run these scripts on a Windows system would be foolish.

Inputs:-
The list of talks for the festival - CSV file, parse_talks.plx
Individual orders for mp3s - Web page, orders.plx
HQ mp3 files - Web page, upload_talk.plx

Processing:-
Back up HQ mp3 - backup_hq_files.plx
Transcode to LQ mp3 - transcode_queue_runner.plx

Outputs:-
Overview pages
- filesystem status - files.plx
- upload progress - uploads.plx
Upload LQ mp3s to website - upload_queue_runner.plx
Make repo of LQ mp3s available to duplication team - download from local website

State reporting
- Use process name to communicate state - include talk ID

Logging
- Upload queue runner log - queue_runner.log
- Transcode queue runner log - transcode.log


DB overview:-

TABLE `talks` 
	`id` int(3) PRIMARY KEY
	`year` int(2)
	`speaker` varchar(255)
	`title` varchar(255)
	`available` bool

TABLE `orders`
	`id` int(3) PRIMARY KEY

TABLE `order_items`
	`order_id` int(3) MUL PRIMARY KEY
	`talk_id` int(3) MUL PRIMARY KEY

TABLE `upload_queue`
	`sequence` int(3)
	`priority` int(1) 
	`talk_id` PRIMARY KEY

TABLE `transcode_queue`
        `sequence` int(3) 
        `priority` int(1) 
        `talk_id` PRIMARY KEY

	




